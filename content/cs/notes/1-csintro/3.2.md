---
title: 3.2 CPU中的核心部件与Simple-MIPS指令（1）
---

## CPU 核心部件

### 程序计数器 (Program Counter, PC)

- **定义**：存储下一条要执行的指令的内存地址。
- **功能**：在每条指令执行完毕后，PC 会自动增加（通常是加 4，因为 Simple-MIPS 指令是 32 位=4 字节），指向下一条指令。
- **类比**：就像读书时的书签，标记着你读到哪一页了。
- **重要性**：控制程序的执行流程，是实现顺序执行、跳转、循环等控制结构的基础。

### 指令寄存器 (Instruction Register, IR)

- **定义**：存储当前正在执行的指令。
- **功能**：从内存中取出指令后，先放入 IR，然后由控制单元解码并执行。
- **组成**：在 Simple-MIPS 架构中，32 位指令通常分为几个字段：
  - **操作码 (Opcode)**：指定指令类型（如加法、加载、存储等）
  - **寄存器编号**：指定源寄存器和目标寄存器
  - **立即数/地址偏移**：用于内存访问或算术运算的常数

### 算术逻辑单元 (Arithmetic Logic Unit, ALU)

- **定义**：执行算术运算和逻辑运算的核心部件。
- **功能**：
  - **算术运算**：加法、减法、乘法、除法等
  - **逻辑运算**：与(AND)、或(OR)、非(NOT)、异或(XOR)等
  - **移位运算**：左移、右移（逻辑移位和算术移位）
  - **比较运算**：比较两个数的大小，设置条件标志
- **输入输出**：通常有两个输入操作数和一个输出结果。

### 寄存器 (Registers, R)

- **定义**：CPU 内部的高速存储单元，用于临时存放数据和地址。
- **特点**：
  - 访问速度比内存快得多（通常在 1 个时钟周期内）
  - 数量有限（Simple-MIPS 有 32 个通用寄存器）
  - 每个寄存器有固定大小（Simple-MIPS 是 32 位）
- **Simple-MIPS 寄存器命名**：
  - `$zero`：始终为 0 的寄存器
  - `$at`：汇编器临时寄存器
  - `$v0-$v1`：函数返回值
  - `$a0-$a3`：函数参数
  - `$t0-$t9`：临时寄存器
  - `$s0-$s7`：保存寄存器
  - 等等...

## Simple-MIPS 数据操作与传输指令

{{< callout type="info" >}}
本章节及后续章节使用的指令集被称为 **Simple-MIPS**。它是一个为了教学目的而设计的简化版指令集，参考了 MIPS 等架构，但并不完全等同于真实的 MIPS 指令集。其目的是为了更直观地讲解计算机组成原理的核心概念。
{{</ callout >}}

本节介绍几种基本的 Simple-MIPS 数据操作与传输指令：load、store、mov、sub、shiftl、shiftr。

### load 指令

- **类型**：数据加载指令
- **功能**：从内存中读取数据到寄存器
- **语法**：`lw $rt, offset($rs)`
- **说明**：
  - `$rs`：基址寄存器，存储内存地址
  - `offset`：偏移量（立即数）
  - `$rt`：目标寄存器，接收从内存读取的数据
- **示例**：`lw $t0, 4($s1)`
  - 从地址 `$s1 + 4` 处读取一个字（32 位）到 `$t0` 寄存器
- **类比**：就像从书架上拿一本书到桌子上阅读

### store 指令

- **类型**：数据存储指令
- **功能**：将寄存器中的数据写入内存
- **语法**：`sw $rt, offset($rs)`
- **说明**：
  - `$rt`：源寄存器，包含要存储的数据
  - `$rs`：基址寄存器，存储内存地址
  - `offset`：偏移量（立即数）
- **示例**：`sw $t0, 8($s1)`
  - 将 `$t0` 寄存器的值存储到地址 `$s1 + 8` 处
- **类比**：就像把桌子上的书放回书架

### mov 指令

- **类型**：数据移动指令
- **功能**：将一个寄存器的值复制到另一个寄存器
- **语法**：`move $rd, $rs`
- **说明**：
  - `$rs`：源寄存器
  - `$rd`：目标寄存器
- **注意**：在真实的 MIPS 中没有直接的 `mov` 指令，通常用 `add` 或 `or` 实现。但在 Simple-MIPS 中我们将其视为一条基本指令。
- **示例**：`add $t0, $t1, $zero`
  - 将 `$t1` 的值复制到 `$t0`

### sub 指令

- **类型**：算术运算指令
- **功能**：执行两个寄存器的减法运算
- **语法**：`sub $rd, $rs, $rt`
- **说明**：
  - `$rs`：被减数寄存器
  - `$rt`：减数寄存器
  - `$rd`：结果寄存器
- **运算**：`$rd = $rs - $rt`
- **示例**：`sub $t0, $t1, $t2`
  - 计算 `$t1 - $t2`，结果存入 `$t0`
- **实现**：在 ALU 中执行减法操作

### shiftl 指令

- **类型**：移位指令
- **功能**：逻辑左移
- **语法**：`sll $rd, $rt, shamt`
- **说明**：
  - `$rt`：源寄存器
  - `shamt`：移位位数（0-31）
  - `$rd`：结果寄存器
- **操作**：将 `$rt` 的值向左移动 `shamt` 位，右侧补 0
- **示例**：`sll $t0, $t1, 2`
  - 将 `$t1` 左移 2 位，结果存入 `$t0`
- **数学意义**：相当于乘以 $2^{shamt}$

### shiftr 指令

- **类型**：移位指令
- **功能**：逻辑右移
- **语法**：`srl $rd, $rt, shamt`
- **说明**：
  - `$rt`：源寄存器
  - `shamt`：移位位数（0-31）
  - `$rd`：结果寄存器
- **操作**：将 `$rt` 的值向右移动 `shamt` 位，左侧补 0
- **示例**：`srl $t0, $t1, 3`
  - 将 `$t1` 右移 3 位，结果存入 `$t0`
- **数学意义**：相当于除以 $2^{shamt}$，结果向下取整
