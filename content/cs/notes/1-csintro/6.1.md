---
title: 6.1 计算机的启动
---

计算机的启动过程（Boot Process）是从硬件加电到操作系统完全就绪的过程。这里的“计算机”是广义的，不仅指台式机和笔记本（通常基于 x86 架构），还包括智能手机、平板电脑、嵌入式设备（通常基于 ARM 架构）等。虽然硬件架构不同，但启动流程在逻辑上高度相似。

## 启动自检阶段 (Power-On Self-Test, POST)

当按下电源键，电源管理芯片（PMIC）向 CPU/SoC 供电并发送复位信号，设备进入自检阶段。

- **核心任务**：CPU 运行内部固化的第一段代码（Boot ROM），检测关键硬件是否正常。
- **检测对象**：
  - **PC**：CPU 寄存器、内存条、显卡、键盘控制器等。
  - **手机/嵌入式**：片上系统（SoC）状态、关键传感器、电源状态。
- **故障反馈**：
  - **PC**：蜂鸣器报警（如“一长两短”）或主板 LED 灯。
  - **手机**：通常表现为黑屏、震动反馈异常或无法进入开机画面。

## 初始化启动阶段 (Initialization)

自检通过后，固件开始初始化核心硬件，为加载更复杂的软件做准备。

- **PC (BIOS/UEFI)**：
  - 初始化主板芯片组、PCIe 总线。
  - 枚举连接的设备（硬盘、USB）。
  - **Secure Boot**：验证后续启动程序的数字签名，防止恶意软件篡改。
- **手机 (Bootloader/SPL)**：
  - **初始化内存 (DRAM)**：SoC 内部的 SRAM 很小，必须先初始化外部的大容量 RAM 才能运行复杂的程序。
  - **初始化时钟与电源**：设置 CPU 频率和电压。
  - 建立基本的硬件抽象层。

## 启动加载阶段 (Boot Loading)

硬件环境准备就绪后，控制权将移交给启动加载程序（Bootloader），开始寻找并加载操作系统。

- **任务**：从存储介质（硬盘、闪存）中读取操作系统内核映像，并将其加载到内存中。
- **PC**：
  - **MBR/GPT**：读取分区表，定位启动分区。
  - **Bootloader**（如 GRUB, Windows Boot Manager）：提供多系统选择菜单，加载内核文件（如 `vmlinuz`, `ntoskrnl.exe`）。
- **手机**：
  - **Secondary Bootloader**（如 Android 的 LK, iOS 的 iBoot）：从闪存的特定分区（Boot Partition）读取内核。
  - 提供**恢复模式 (Recovery)** 或**下载模式**（刷机模式）的入口组合键检测。

## 内核装载阶段 (Kernel Loading)

Bootloader 跳转到内核入口点，操作系统内核正式接管计算机硬件的所有控制权。

- **核心任务**：
  - **硬件驱动加载**：内核扫描所有硬件，加载对应的驱动程序（显卡、WiFi、蓝牙、触摸屏、声卡等）。
  - **内存与进程管理**：初始化虚拟内存管理（MMU）、进程调度器。
  - **挂载文件系统**：将存储设备上的根文件系统（Rootfs）挂载为只读，随后转为读写模式。
- **启动首个进程**：
  - **Linux/Android**：启动 `init` 进程（PID 1），它是所有其他用户进程的祖先。
  - **Windows**：启动会话管理器子系统 (`smss.exe`)。
  - **iOS/macOS**：启动 `launchd`。

## 登录阶段 (Login / User Space Initialization)

这是启动过程的最后阶段，系统从内核态进入用户态，准备与用户交互。

- **系统服务启动**：
  - 启动后台守护进程（Daemons），如网络连接、推送通知、定位服务、安全审计等。
- **图形界面 (GUI) 加载**：
  - **PC**：启动显示管理器（Display Manager），加载窗口系统（X11/Wayland/DWM），显示登录框。
  - **手机**：启动图形渲染服务（Android 的 SurfaceFlinger, iOS 的 SpringBoard），加载锁屏界面。
- **用户验证与会话**：
  - 等待用户输入密码、指纹或面部识别。
  - **解密数据**：在现代移动设备上，用户解锁后才会解密用户数据分区（FBE, File-Based Encryption）。
  - **加载桌面/主屏幕**：加载用户的个性化配置、壁纸、图标，系统完全启动完毕。
